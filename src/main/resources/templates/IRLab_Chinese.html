<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="UTF-8" />
	<title>中文预处理</title>
	<link rel="stylesheet" type="text/css" href="css/bootstrap-theme.min.css">
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/common.css">
	<script src="jquery-2.1.1/jquery.min.js" type="text/javascript"></script>
	<script src="js/bootstrap.min.js" type="text/javascript"></script>

</head>
	 <body>
	<div id="Layer1" style="position:absolute; width:100%; height:100%; z-index:-1"> 
		<img src="images/bg8.jpg" width="100%" height="100%"/> 
	</div>
	<nav class="navbar navbar-inverse">
		<!-- <div class="container" style="margin-left: 200px"> -->
		<div class="row" style="margin-left: 200px">
			<ul class="nav nav-pills">
				<li role="presentation"
					style="margin-right: 50px; width: 500px; height: 50px"><img
						src="images/IRLablogo.png" alt=""
						style="width: auto; height: auto; max-width: 100%; max-height: 100%"><span
						style="color: rgb(255, 255, 255); font-size: 20px">IRLab信息检索与自然语言处理可视化实验平台</span>
				</li>
				<li role="presentation" style="margin-top:5px"><a th:href="@{/IRLab_index}">首页</a></li>
				<li role="presentation" class="dropdown" style="margin-top: 5px; margin-left: 30px;">
					<a class="dropdown-toggle" data-toggle="dropdown" href="#"   role="button" aria-haspopup="true" aria-expanded="false">
						预处理<span class="caret"></span>
					</a>
					<ul class="dropdown-menu">
						<li role="presentation" ><a th:href="@{/IRLab_Chinese}">中文</a></li>
						<li role="presentation" ><a th:href="@{/IRLab_English}">英文</a></li>
					</ul>
				</li>
				<li role="presentation" class="dropdown" style="margin-top: 5px;margin-left: 10px;">
					<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
						检索模型<span class="caret"></span>
					</a>
					<ul class="dropdown-menu">
						<li role="presentation" ><a th:href="@{/IRLab_br}">布尔模型</a></li>
						<li role="presentation" ><a th:href="@{/IRLab_vsm}">向量空间模型</a></li>
						<li role="presentation" ><a th:href="@{/IRLab_pm}">概率模型</a></li>
						<li role="presentation" ><a th:href="@{/IRLab_lm}">语言模型</a></li>
					</ul>
				</li>
				<li role="presentation" class="dropdown" style="margin-top: 5px;margin-left: 10px;">
					<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
						深度学习<span class="caret"></span>
					</a>
					<ul class="dropdown-menu">
						<li role="presentation" ><a th:href="@{/IRLab_participle}">分词</a></li>
						<li role="presentation" ><a th:href="@{/IRLab_post}">词性标注</a></li>
						<li role="presentation" ><a th:href="@{/IRLab_ione}">命名实体识别</a></li>
					</ul>
				</li>
				<li role="presentation" style=" margin-top:5px"><a href="#">API</a></li>
			</ul>
		</div>
	</nav>
	<div class="row" style="margin-top: 30px;">
		<div class="col-md-2 col-md-offset-2" style="margin-top: 60px">
			<h4>实验文档集列表：</h4>
			<div class="list-group" >
  				<a href="javascript:void(0);" onclick="a_txt('1.txt')" class="list-group-item" style="color: black">1.txt</a>
  				<a href="javascript:void(0);" onclick="a_txt('2.txt')" class="list-group-item" style="color: black">2.txt</a>
 				<a href="javascript:void(0);" onclick="a_txt('3.txt')" class="list-group-item" style="color: black">3.txt</a>
 				<a href="javascript:void(0);" onclick="a_txt('4.txt')" class="list-group-item" style="color: black">4.txt</a>
 				<a href="javascript:void(0);" onclick="a_txt('5.txt')" class="list-group-item" style="color: black">5.txt</a>
			</div>
		</div>
		
  		<div class="col-md-5" style="margin-left:145px">
  			<h3 style="text-align:center;">中文预处理</h3>
  			<ul class="nav nav-tabs">
  				<li role="presentation" class="active"><a id="analysis" href="#" style="font-size: 15px;">分词</a></li>
  				<li role="presentation"><a id="punctuation" href="#" style="font-size: 15px;">去标点符号</a></li>
  				<li role="presentation" class="dropdown">
    				<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false"style="font-size: 15px;">
     				建立索引<span class="caret"></span>
   					</a>
   					<ul class="dropdown-menu" style="font-size: 15px;">
						<li role="presentation" ><a id="invertedIndex" href="#">布尔模型</a></li>
						<li role="presentation" ><a th:href="@{/IRLab_vsm}">向量空间模型</a></li>
						<li role="presentation" ><a th:href="@{/IRLab_pm}">概率模型</a></li>
						<li role="presentation" ><a th:href="@{/IRLab_lm}">语言模型</a></li>
   				 </ul>
  				</li>
			</ul>
			<div class="row col-md-6 pre-scrollable" id="results" >
  		</div>
	</div>
	</div>
	<div class="footer">
		<div class="container">
			<div class="row footer-top">
				<div class="col-sm-6 col-lg-6">
					<h4>武汉大学信息管理学院</h4>
					<p>信息检索与知识挖掘研究所</p>
					<p><span class="glyphicon glyphicon-map-marker"></span>湖北省武汉市武昌区珞珈山武汉大学信息管理学院611室</p>
				</div>
				<div class="col-sm-6  col-lg-5 col-lg-offset-1">
					<div class="row about">
						<div class="col-xs-3">
							<h4>机构简介</h4>
							<ul class="list-unstyled">
								<li>
									<a style='color:#fff' href="http://ir.whu.edu.cn/"><span class="glyphicon glyphicon-link"></span>&nbsp关于我们</a>
								</li>
							</ul>
						</div>
						<div class="col-xs-9">
							<h4>联系方式</h4>
							<ul class="list-unstyled">
								<li>
									<span class="glyphicon glyphicon-envelope">&nbsp电子邮件:weilu@whu.edu.cn</span>
								</li>
							</ul>
						</div>
					</div>

				</div>
			</div>
			<hr>
			<div class="row footer-bottom">
				<ul class="list-inline text-center">
					<li>Copyright &copy;2018. 武汉大学信息检索与知识挖掘研究所  All Rights Reserved.</li>
				</ul>
			</div>
		</div>
	</div>
	 </body>
<script type="text/javascript">
	//文件名的全局变量
	var filename;
	//点击a标签获取文件名
	function a_txt(m) {
	    filename = m;
    }
    //中文分词事件
    $(function() {
        $("#analysis").click(function() {
            var fileName = filename;
            $.ajax({
                type:"POST",
                url:"/bool/segment",
                data:{"fileName":fileName},
                datatype:"text",
                contentType:"application/x-www-form-urlencoded; charset=utf-8",
                success:function(segments){
                    //	alert("分词结果成功返回！");
                    //	alert(segments);
                    segments = segments.segments;
                    $('#results').text("");// 清空数据
                    $('#results').append("<p id='p' style='color: rgb(255, 255, 255); font-size: 18px'></p>");
                    $("#p").append(segments);
                    //	alert("分词成功！");
                },
                error:function(){
                    alert("分词出错！");
                    $("#results").text("");// 清空数据
                }
            });
        });
    });
	//中文去标点事件
    $(function() {//这里是动态元素<li>添加的事件去标点结果
        $("#punctuation").click(function() {
            var fileName = filename;
            $.ajax({
                type:"POST",
                url:"/bool/removePun",
                data:{"fileName":fileName},
                datatype:"text",
                contentType:"application/x-www-form-urlencoded; charset=utf-8",
                success:function(noPunSegments){
                    //		alert("去标点结果成功返回！");
                    //		alert(noPunSegments);
                    noPunSegments = noPunSegments.noPunSegments;
                    $('#results').text("");// 清空数据
                    $('#results').append("<p id='p' style='color: rgb(255, 255, 255); font-size: 18px'></p>");
                    $("#p").append(noPunSegments);
                    //		alert("去标点成功！");
                },
                error:function(){
                    alert("去标点出错！");
                    $("#results").text("");// 清空数据
                }
            });
        });
    });

    //布尔模型的倒排索引
    $("#invertedIndex").click(function() {
        //alert("倒排索引");
        $.ajax({
            type:"POST",
            url:"/bool/buildIndex",
            traditional: true,
            datatype:"json",
            contentType:"application/x-www-form-urlencoded; charset=utf-8",
            success:function(invertedIndex){
                var invertedIndex = invertedIndex.jsonArray;
                //alert(invertedIndex);
                //	alert(invertedIndex);
                $('#results').text("");// 清空数据
                $('#results').append("<p style='color: rgb(255, 255, 255); font-size: 18px'></p>");
                $.each(invertedIndex,function(index,obj) {
                    for (key in obj){ //解析出得到的文档名key 和原文contents
                        var posting = obj[key];
                        //alert(key+"-->"+posting);
                        $("#p").append(key+" ---> ["+posting+"]<br>");
                        //$("p").append("<br>");
                    }
                });
                //alert("索引建立成功！");
            },
            error:function(){
                alert("索引建立出错！");
                $("#results").text("");// 清空数据
            }
        });
    });
</script>
</html>